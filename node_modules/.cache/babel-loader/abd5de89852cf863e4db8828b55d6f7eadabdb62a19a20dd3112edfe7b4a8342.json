{"ast":null,"code":"var _jsxFileName = \"/Users/ikassen/kiakia/frontend/src/components/Charts.jsx\";\nimport React from \"react\";\nimport { ResponsiveContainer, PieChart, Pie, Cell, BarChart, Bar, XAxis, YAxis, Tooltip, CartesianGrid, Legend } from \"recharts\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst QUALITY_COLORS = {\n  высокий: \"#22c55e\",\n  хороший: \"#16a34a\",\n  средний: \"#facc15\",\n  низкий: \"#f97316\"\n};\nconst CITY_COLORS = [\"#3b82f6\", \"#22c55e\", \"#a855f7\", \"#f59e0b\", \"#06b6d4\", \"#ef4444\", \"#84cc16\", \"#ec4899\", \"#14b8a6\", \"#6366f1\"];\n\n// Изменение под новый API: отдельная прокручиваемая легенда для большого числа городов.\nconst CityLegend = ({\n  payload = []\n}) => {\n  if (!payload.length) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mt-2 max-h-28 space-y-1 overflow-y-auto pr-1 text-xs\",\n    children: payload.map(entry => {\n      var _entry$payload;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between gap-3 text-slate-600\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex min-w-0 items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"h-2.5 w-2.5 shrink-0 rounded-full\",\n            style: {\n              backgroundColor: entry.color\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"truncate\",\n            children: entry.value\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"shrink-0 text-slate-500\",\n          children: ((_entry$payload = entry.payload) === null || _entry$payload === void 0 ? void 0 : _entry$payload.value) || 0\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this)]\n      }, entry.value, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n};\n_c = CityLegend;\nconst ChartArea = ({\n  loading,\n  dataLength,\n  children\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"h-80\",\n  children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex h-full items-center justify-center text-sm text-slate-400\",\n    children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 7\n  }, this) : dataLength === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex h-full items-center justify-center text-sm text-slate-400\",\n    children: \"\\u041D\\u0435\\u0434\\u043E\\u0441\\u0442\\u0430\\u0442\\u043E\\u0447\\u043D\\u043E \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 7\n  }, this) : /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n    width: \"100%\",\n    height: \"100%\",\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 7\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 59,\n  columnNumber: 3\n}, this);\n_c2 = ChartArea;\nconst Charts = ({\n  aggregations,\n  loading\n}) => {\n  if (!aggregations && !loading) return null;\n  const {\n    by_quality = [],\n    by_city = [],\n    by_model = [],\n    by_date = []\n  } = aggregations || {};\n\n  // Изменение под новый API: готовим данные городов из aggregations.by_city ({ name, value }).\n  const cityData = by_city.filter(city => Number(city.value) > 0).map(city => ({\n    name: city.name || \"Не указан\",\n    value: Number(city.value) || 0\n  })).sort((a, b) => b.value - a.value);\n  const modelsData = [...by_model].sort((a, b) => b.count - a.count).slice(0, 10);\n  const timeSeriesData = by_date;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6 mb-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid gap-6 lg:grid-cols-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card p-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"mb-2 text-sm font-semibold text-slate-700\",\n          children: \"\\u0421\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043A\\u0430 \\u043B\\u0438\\u0434\\u043E\\u0432 \\u043F\\u043E \\u0433\\u043E\\u0440\\u043E\\u0434\\u0430\\u043C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ChartArea, {\n          loading: loading,\n          dataLength: cityData.length,\n          children: /*#__PURE__*/_jsxDEV(PieChart, {\n            children: [/*#__PURE__*/_jsxDEV(Pie, {\n              data: cityData,\n              dataKey: \"value\",\n              nameKey: \"name\",\n              cx: \"50%\",\n              cy: \"44%\",\n              innerRadius: 45,\n              outerRadius: 85,\n              children: cityData.map((entry, index) => /*#__PURE__*/_jsxDEV(Cell, {\n                fill: CITY_COLORS[index % CITY_COLORS.length]\n              }, entry.name, false, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n              formatter: (value, name) => [value, name]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Legend, {\n              verticalAlign: \"bottom\",\n              align: \"left\",\n              content: /*#__PURE__*/_jsxDEV(CityLegend, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 26\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card p-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"mb-2 text-sm font-semibold text-slate-700\",\n          children: \"\\u041B\\u0438\\u0434\\u044B \\u043F\\u043E \\u043C\\u043E\\u0434\\u0435\\u043B\\u044F\\u043C \\u0430\\u0432\\u0442\\u043E\\u043C\\u043E\\u0431\\u0438\\u043B\\u0435\\u0439\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ChartArea, {\n          loading: loading,\n          dataLength: modelsData.length,\n          children: /*#__PURE__*/_jsxDEV(BarChart, {\n            data: modelsData,\n            children: [/*#__PURE__*/_jsxDEV(CartesianGrid, {\n              strokeDasharray: \"3 3\",\n              vertical: false\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(XAxis, {\n              dataKey: \"model\",\n              tick: {\n                fontSize: 11\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(YAxis, {\n              allowDecimals: false\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Tooltip, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Bar, {\n              dataKey: \"count\",\n              fill: \"#22c55e\",\n              radius: [4, 4, 0, 0]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card p-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"mb-3 text-sm font-semibold text-slate-700\",\n        children: \"\\u0421\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043A\\u0430 \\u043B\\u0438\\u0434\\u043E\\u0432 (\\u043F\\u043E \\u043A\\u0430\\u0447\\u0435\\u0441\\u0442\\u0432\\u0443)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ChartArea, {\n        loading: loading,\n        dataLength: timeSeriesData.length,\n        children: /*#__PURE__*/_jsxDEV(BarChart, {\n          data: timeSeriesData,\n          children: [/*#__PURE__*/_jsxDEV(CartesianGrid, {\n            strokeDasharray: \"3 3\",\n            vertical: false\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(XAxis, {\n            dataKey: \"date\",\n            tick: {\n              fontSize: 11\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(YAxis, {\n            allowDecimals: false\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Tooltip, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Legend, {\n            wrapperStyle: {\n              fontSize: 12\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Bar, {\n            dataKey: \"\\u0432\\u044B\\u0441\\u043E\\u043A\\u0438\\u0439\",\n            stackId: \"a\",\n            fill: QUALITY_COLORS[\"высокий\"]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Bar, {\n            dataKey: \"\\u0445\\u043E\\u0440\\u043E\\u0448\\u0438\\u0439\",\n            stackId: \"a\",\n            fill: QUALITY_COLORS[\"хороший\"]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Bar, {\n            dataKey: \"\\u0441\\u0440\\u0435\\u0434\\u043D\\u0438\\u0439\",\n            stackId: \"a\",\n            fill: QUALITY_COLORS[\"средний\"]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Bar, {\n            dataKey: \"\\u043D\\u0438\\u0437\\u043A\\u0438\\u0439\",\n            stackId: \"a\",\n            fill: QUALITY_COLORS[\"низкий\"]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid gap-6 lg:grid-cols-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card p-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"mb-4 text-sm font-semibold text-slate-700\",\n          children: \"\\u0421\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043A\\u0430 \\u043A\\u0430\\u0447\\u0435\\u0441\\u0442\\u0432\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-3\",\n          children: by_quality.map(q => {\n            const total = by_quality.reduce((s, i) => s + i.count, 0);\n            const percent = total ? q.count / total * 100 : 0;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-1 flex justify-between text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: q.quality\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 216,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-slate-500\",\n                  children: q.count\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 217,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"h-2 w-full rounded bg-slate-100\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"h-2 rounded\",\n                  style: {\n                    width: `${percent}%`,\n                    background: q.quality === \"высокий\" ? \"#22c55e\" : q.quality === \"хороший\" ? \"#16a34a\" : q.quality === \"средний\" ? \"#facc15\" : \"#f97316\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 220,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 219,\n                columnNumber: 19\n              }, this)]\n            }, q.quality, true, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card p-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"mb-4 text-sm font-semibold text-slate-700\",\n          children: \"\\u041A\\u043B\\u044E\\u0447\\u0435\\u0432\\u044B\\u0435 \\u043C\\u0435\\u0442\\u0440\\u0438\\u043A\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 11\n        }, this), ((_by_quality$find, _by_quality$find2) => {\n          const total = by_quality.reduce((s, i) => s + i.count, 0);\n          const high = ((_by_quality$find = by_quality.find(i => i.quality === \"высокий\")) === null || _by_quality$find === void 0 ? void 0 : _by_quality$find.count) || 0;\n          const good = ((_by_quality$find2 = by_quality.find(i => i.quality === \"хороший\")) === null || _by_quality$find2 === void 0 ? void 0 : _by_quality$find2.count) || 0;\n          const conversion = total ? Math.round((high + good) / total * 100) : 0;\n          const highPotential = total ? Math.round(high / total * 100) : 0;\n          const bestDay = [...by_date].sort((a, b) => b.total - a.total)[0];\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-3 text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\u041E\\u0431\\u0449\\u0430\\u044F \\u043A\\u043E\\u043D\\u0432\\u0435\\u0440\\u0441\\u0438\\u044F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 266,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: [conversion, \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\u0412\\u044B\\u0441\\u043E\\u043A\\u0438\\u0439 \\u043F\\u043E\\u0442\\u0435\\u043D\\u0446\\u0438\\u0430\\u043B\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: [highPotential, \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\u041C\\u0430\\u043A\\u0441\\u0438\\u043C\\u0443\\u043C \\u0437\\u0430\\u044F\\u0432\\u043E\\u043A \\u0437\\u0430 \\u0434\\u0435\\u043D\\u044C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: (bestDay === null || bestDay === void 0 ? void 0 : bestDay.total) || 0\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 275,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\u041B\\u0443\\u0447\\u0448\\u0438\\u0439 \\u0434\\u0435\\u043D\\u044C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: (bestDay === null || bestDay === void 0 ? void 0 : bestDay.date) || \"—\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 15\n          }, this);\n        })()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 5\n  }, this);\n};\n_c3 = Charts;\nexport default Charts;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"CityLegend\");\n$RefreshReg$(_c2, \"ChartArea\");\n$RefreshReg$(_c3, \"Charts\");","map":{"version":3,"names":["React","ResponsiveContainer","PieChart","Pie","Cell","BarChart","Bar","XAxis","YAxis","Tooltip","CartesianGrid","Legend","jsxDEV","_jsxDEV","QUALITY_COLORS","высокий","хороший","средний","низкий","CITY_COLORS","CityLegend","payload","length","className","children","map","entry","_entry$payload","style","backgroundColor","color","fileName","_jsxFileName","lineNumber","columnNumber","value","_c","ChartArea","loading","dataLength","width","height","_c2","Charts","aggregations","by_quality","by_city","by_model","by_date","cityData","filter","city","Number","name","sort","a","b","modelsData","count","slice","timeSeriesData","data","dataKey","nameKey","cx","cy","innerRadius","outerRadius","index","fill","formatter","verticalAlign","align","content","strokeDasharray","vertical","tick","fontSize","allowDecimals","radius","wrapperStyle","stackId","q","total","reduce","s","i","percent","quality","background","_by_quality$find","_by_quality$find2","high","find","good","conversion","Math","round","highPotential","bestDay","date","_c3","$RefreshReg$"],"sources":["/Users/ikassen/kiakia/frontend/src/components/Charts.jsx"],"sourcesContent":["import React from \"react\";\nimport {\n  ResponsiveContainer,\n  PieChart,\n  Pie,\n  Cell,\n  BarChart,\n  Bar,\n  XAxis,\n  YAxis,\n  Tooltip,\n  CartesianGrid,\n  Legend,\n} from \"recharts\";\n\nconst QUALITY_COLORS = {\n  высокий: \"#22c55e\",\n  хороший: \"#16a34a\",\n  средний: \"#facc15\",\n  низкий: \"#f97316\",\n};\n\nconst CITY_COLORS = [\n  \"#3b82f6\",\n  \"#22c55e\",\n  \"#a855f7\",\n  \"#f59e0b\",\n  \"#06b6d4\",\n  \"#ef4444\",\n  \"#84cc16\",\n  \"#ec4899\",\n  \"#14b8a6\",\n  \"#6366f1\",\n];\n\n// Изменение под новый API: отдельная прокручиваемая легенда для большого числа городов.\nconst CityLegend = ({ payload = [] }) => {\n  if (!payload.length) return null;\n\n  return (\n    <div className=\"mt-2 max-h-28 space-y-1 overflow-y-auto pr-1 text-xs\">\n      {payload.map((entry) => (\n        <div key={entry.value} className=\"flex items-center justify-between gap-3 text-slate-600\">\n          <div className=\"flex min-w-0 items-center gap-2\">\n            <span\n              className=\"h-2.5 w-2.5 shrink-0 rounded-full\"\n              style={{ backgroundColor: entry.color }}\n            />\n            <span className=\"truncate\">{entry.value}</span>\n          </div>\n          <span className=\"shrink-0 text-slate-500\">{entry.payload?.value || 0}</span>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nconst ChartArea = ({ loading, dataLength, children }) => (\n  <div className=\"h-80\">\n    {loading ? (\n      <div className=\"flex h-full items-center justify-center text-sm text-slate-400\">\n        Загрузка данных...\n      </div>\n    ) : dataLength === 0 ? (\n      <div className=\"flex h-full items-center justify-center text-sm text-slate-400\">\n        Недостаточно данных\n      </div>\n    ) : (\n      <ResponsiveContainer width=\"100%\" height=\"100%\">\n        {children}\n      </ResponsiveContainer>\n    )}\n  </div>\n);\n\nconst Charts = ({ aggregations, loading }) => {\n  if (!aggregations && !loading) return null;\n\n  const {\n    by_quality = [],\n    by_city = [],\n    by_model = [],\n    by_date = [],\n  } = aggregations || {};\n\n  // Изменение под новый API: готовим данные городов из aggregations.by_city ({ name, value }).\n  const cityData = by_city\n    .filter((city) => Number(city.value) > 0)\n    .map((city) => ({\n      name: city.name || \"Не указан\",\n      value: Number(city.value) || 0,\n    }))\n    .sort((a, b) => b.value - a.value);\n\n  const modelsData = [...by_model]\n    .sort((a, b) => b.count - a.count)\n    .slice(0, 10);\n\n  const timeSeriesData = by_date;\n\n  return (\n    <div className=\"space-y-6 mb-6\">\n      {/* ===================== */}\n      {/* TOP BLOCK */}\n      {/* ===================== */}\n      <div className=\"grid gap-6 lg:grid-cols-2\">\n        {/* PIE — Города */}\n        <div className=\"card p-4\">\n          <h2 className=\"mb-2 text-sm font-semibold text-slate-700\">\n            Статистика лидов по городам\n          </h2>\n\n          <ChartArea loading={loading} dataLength={cityData.length}>\n            <PieChart>\n              <Pie\n                data={cityData}\n                dataKey=\"value\"\n                nameKey=\"name\"\n                cx=\"50%\"\n                cy=\"44%\"\n                innerRadius={45}\n                outerRadius={85}\n              >\n                {cityData.map((entry, index) => (\n                  <Cell\n                    key={entry.name}\n                    fill={CITY_COLORS[index % CITY_COLORS.length]}\n                  />\n                ))}\n              </Pie>\n              {/* Изменение: tooltip в формате \"город: количество\". */}\n              <Tooltip formatter={(value, name) => [value, name]} />\n              <Legend\n                verticalAlign=\"bottom\"\n                align=\"left\"\n                content={<CityLegend />}\n              />\n            </PieChart>\n          </ChartArea>\n        </div>\n\n        {/* BAR — Модели */}\n        <div className=\"card p-4\">\n          <h2 className=\"mb-2 text-sm font-semibold text-slate-700\">\n            Лиды по моделям автомобилей\n          </h2>\n\n          <ChartArea loading={loading} dataLength={modelsData.length}>\n            <BarChart data={modelsData}>\n              <CartesianGrid strokeDasharray=\"3 3\" vertical={false} />\n              <XAxis dataKey=\"model\" tick={{ fontSize: 11 }} />\n              <YAxis allowDecimals={false} />\n              <Tooltip />\n              <Bar dataKey=\"count\" fill=\"#22c55e\" radius={[4, 4, 0, 0]} />\n            </BarChart>\n          </ChartArea>\n        </div>\n      </div>\n\n      {/* ===================== */}\n      {/* BOTTOM BLOCK */}\n      {/* ===================== */}\n      <div className=\"card p-4\">\n        <h2 className=\"mb-3 text-sm font-semibold text-slate-700\">\n          Статистика лидов (по качеству)\n        </h2>\n\n        <ChartArea loading={loading} dataLength={timeSeriesData.length}>\n          <BarChart data={timeSeriesData}>\n            <CartesianGrid strokeDasharray=\"3 3\" vertical={false} />\n            <XAxis dataKey=\"date\" tick={{ fontSize: 11 }} />\n            <YAxis allowDecimals={false} />\n            <Tooltip />\n            <Legend wrapperStyle={{ fontSize: 12 }} />\n            <Bar\n              dataKey=\"высокий\"\n              stackId=\"a\"\n              fill={QUALITY_COLORS[\"высокий\"]}\n            />\n            <Bar\n              dataKey=\"хороший\"\n              stackId=\"a\"\n              fill={QUALITY_COLORS[\"хороший\"]}\n            />\n            <Bar\n              dataKey=\"средний\"\n              stackId=\"a\"\n              fill={QUALITY_COLORS[\"средний\"]}\n            />\n            <Bar\n              dataKey=\"низкий\"\n              stackId=\"a\"\n              fill={QUALITY_COLORS[\"низкий\"]}\n            />\n          </BarChart>\n        </ChartArea>\n      </div>\n\n      <div className=\"grid gap-6 lg:grid-cols-2\">\n        {/* ===================== */}\n        {/* СТАТИСТИКА КАЧЕСТВА */}\n        {/* ===================== */}\n        <div className=\"card p-4\">\n          <h2 className=\"mb-4 text-sm font-semibold text-slate-700\">\n            Статистика качества\n          </h2>\n\n          <div className=\"space-y-3\">\n            {by_quality.map((q) => {\n              const total = by_quality.reduce((s, i) => s + i.count, 0);\n              const percent = total ? (q.count / total) * 100 : 0;\n\n              return (\n                <div key={q.quality}>\n                  <div className=\"mb-1 flex justify-between text-sm\">\n                    <span>{q.quality}</span>\n                    <span className=\"text-slate-500\">{q.count}</span>\n                  </div>\n                  <div className=\"h-2 w-full rounded bg-slate-100\">\n                    <div\n                      className=\"h-2 rounded\"\n                      style={{\n                        width: `${percent}%`,\n                        background:\n                          q.quality === \"высокий\"\n                            ? \"#22c55e\"\n                            : q.quality === \"хороший\"\n                            ? \"#16a34a\"\n                            : q.quality === \"средний\"\n                            ? \"#facc15\"\n                            : \"#f97316\",\n                      }}\n                    />\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n\n        {/* ===================== */}\n        {/* КЛЮЧЕВЫЕ МЕТРИКИ */}\n        {/* ===================== */}\n        <div className=\"card p-4\">\n          <h2 className=\"mb-4 text-sm font-semibold text-slate-700\">\n            Ключевые метрики\n          </h2>\n\n          {(() => {\n            const total = by_quality.reduce((s, i) => s + i.count, 0);\n            const high =\n              by_quality.find((i) => i.quality === \"высокий\")?.count || 0;\n            const good =\n              by_quality.find((i) => i.quality === \"хороший\")?.count || 0;\n\n            const conversion = total\n              ? Math.round(((high + good) / total) * 100)\n              : 0;\n            const highPotential = total ? Math.round((high / total) * 100) : 0;\n\n            const bestDay = [...by_date].sort((a, b) => b.total - a.total)[0];\n\n            return (\n              <div className=\"space-y-3 text-sm\">\n                <div className=\"flex justify-between\">\n                  <span>Общая конверсия</span>\n                  <strong>{conversion}%</strong>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span>Высокий потенциал</span>\n                  <strong>{highPotential}%</strong>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span>Максимум заявок за день</span>\n                  <strong>{bestDay?.total || 0}</strong>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span>Лучший день</span>\n                  <strong>{bestDay?.date || \"—\"}</strong>\n                </div>\n              </div>\n            );\n          })()}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Charts;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}