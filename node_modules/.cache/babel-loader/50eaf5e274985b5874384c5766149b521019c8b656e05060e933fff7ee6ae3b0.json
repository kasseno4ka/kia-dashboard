{"ast":null,"code":"import React,{createContext,useCallback,useContext,useMemo,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";const AUTH_TOKEN_KEY=\"leadDashboard.auth.token\";const AUTH_USER_KEY=\"leadDashboard.auth.user\";const ADMIN_EMAIL=\"ar.omarov@allur.kz\";const ADMIN_PASSWORD=\"Allur123\";const AuthContext=/*#__PURE__*/createContext(null);function getStoredAuth(){try{const token=window.localStorage.getItem(AUTH_TOKEN_KEY);const user=window.localStorage.getItem(AUTH_USER_KEY);return{token,user};}catch(_unused){return{token:null,user:null};}}export const AuthProvider=_ref=>{let{children}=_ref;const stored=getStoredAuth();const[token,setToken]=useState(stored.token);const[user,setUser]=useState(stored.user);const persistAuth=useCallback((nextToken,email)=>{window.localStorage.setItem(AUTH_TOKEN_KEY,nextToken);window.localStorage.setItem(AUTH_USER_KEY,email);setToken(nextToken);setUser(email);},[]);const clearAuth=useCallback(()=>{window.localStorage.removeItem(AUTH_TOKEN_KEY);window.localStorage.removeItem(AUTH_USER_KEY);setToken(null);setUser(null);},[]);const login=useCallback((email,password)=>{if(!email||!password||password.length<7){return{ok:false,error:\"password_short\"};}if(email!==ADMIN_EMAIL||password!==ADMIN_PASSWORD){return{ok:false,error:\"wrong_credentials\"};}const newToken=\"token_\".concat(Date.now());persistAuth(newToken,email);return{ok:true};},[persistAuth]);const logout=useCallback(()=>{clearAuth();},[clearAuth]);const value=useMemo(()=>({token,user,isAuthenticated:Boolean(token),login,logout}),[token,user,login,logout]);return/*#__PURE__*/_jsx(AuthContext.Provider,{value:value,children:children});};export const useAuth=()=>{const ctx=useContext(AuthContext);if(!ctx){throw new Error(\"useAuth must be used within AuthProvider\");}return ctx;};","map":{"version":3,"names":["React","createContext","useCallback","useContext","useMemo","useState","jsx","_jsx","AUTH_TOKEN_KEY","AUTH_USER_KEY","ADMIN_EMAIL","ADMIN_PASSWORD","AuthContext","getStoredAuth","token","window","localStorage","getItem","user","_unused","AuthProvider","_ref","children","stored","setToken","setUser","persistAuth","nextToken","email","setItem","clearAuth","removeItem","login","password","length","ok","error","newToken","concat","Date","now","logout","value","isAuthenticated","Boolean","Provider","useAuth","ctx","Error"],"sources":["/Users/ikassen/kiakia/frontend/src/contexts/AuthContext.jsx"],"sourcesContent":["import React, { createContext, useCallback, useContext, useMemo, useState } from \"react\";\n\nconst AUTH_TOKEN_KEY = \"leadDashboard.auth.token\";\nconst AUTH_USER_KEY = \"leadDashboard.auth.user\";\nconst ADMIN_EMAIL = \"ar.omarov@allur.kz\";\nconst ADMIN_PASSWORD = \"Allur123\";\n\nconst AuthContext = createContext(null);\n\nfunction getStoredAuth() {\n  try {\n    const token = window.localStorage.getItem(AUTH_TOKEN_KEY);\n    const user = window.localStorage.getItem(AUTH_USER_KEY);\n    return { token, user };\n  } catch {\n    return { token: null, user: null };\n  }\n}\n\nexport const AuthProvider = ({ children }) => {\n  const stored = getStoredAuth();\n  const [token, setToken] = useState(stored.token);\n  const [user, setUser] = useState(stored.user);\n\n  const persistAuth = useCallback((nextToken, email) => {\n    window.localStorage.setItem(AUTH_TOKEN_KEY, nextToken);\n    window.localStorage.setItem(AUTH_USER_KEY, email);\n    setToken(nextToken);\n    setUser(email);\n  }, []);\n\n  const clearAuth = useCallback(() => {\n    window.localStorage.removeItem(AUTH_TOKEN_KEY);\n    window.localStorage.removeItem(AUTH_USER_KEY);\n    setToken(null);\n    setUser(null);\n  }, []);\n\n  const login = useCallback((email, password) => {\n    if (!email || !password || password.length < 7) {\n      return { ok: false, error: \"password_short\" };\n    }\n\n    if (email !== ADMIN_EMAIL || password !== ADMIN_PASSWORD) {\n      return { ok: false, error: \"wrong_credentials\" };\n    }\n\n    const newToken = `token_${Date.now()}`;\n    persistAuth(newToken, email);\n    return { ok: true };\n  }, [persistAuth]);\n\n  const logout = useCallback(() => {\n    clearAuth();\n  }, [clearAuth]);\n\n  const value = useMemo(\n    () => ({\n      token,\n      user,\n      isAuthenticated: Boolean(token),\n      login,\n      logout\n    }),\n    [token, user, login, logout]\n  );\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n};\n\nexport const useAuth = () => {\n  const ctx = useContext(AuthContext);\n  if (!ctx) {\n    throw new Error(\"useAuth must be used within AuthProvider\");\n  }\n  return ctx;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}