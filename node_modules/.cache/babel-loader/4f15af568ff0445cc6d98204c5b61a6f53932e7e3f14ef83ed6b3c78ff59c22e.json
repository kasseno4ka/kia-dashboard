{"ast":null,"code":"import _objectSpread from\"/Users/ikassen/kiakia/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useCallback,useMemo,useState}from\"react\";import{format,isValid,parse,parseISO}from\"date-fns\";import{useToast}from\"../contexts/ToastContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const QUALITY_LABEL_CLASS={высокий:\"badge badge-high\",хороший:\"badge badge-good\",средний:\"badge badge-medium\",низкий:\"badge badge-low\"};function formatDate(value){if(!value)return\"—\";try{const date=new Date(value);if(isNaN(date.getTime()))return value;return format(date,\"dd.MM.yyyy HH:mm\");}catch(_unused){return value;}}function toTimestamp(value){if(!value)return 0;if(typeof value===\"number\")return value;if(value instanceof Date)return value.getTime()||0;const raw=String(value).trim();if(!raw)return 0;const isoDate=parseISO(raw);if(isValid(isoDate))return isoDate.getTime();const knownFormats=[\"yyyy-MM-dd HH:mm:ss\",\"yyyy-MM-dd'T'HH:mm:ss\",\"yyyy-MM-dd\",\"dd.MM.yyyy HH:mm\",\"dd.MM.yyyy\"];for(const dateFormat of knownFormats){const parsed=parse(raw,dateFormat,new Date());if(isValid(parsed))return parsed.getTime();}const fallback=new Date(raw);return Number.isNaN(fallback.getTime())?0:fallback.getTime();}const LeadsTable=_ref=>{let{leads,limit,offset,onPageChange,onPageSizeChange,onFilterChange,filters,onViewLead,loading}=_ref;const[sortField,setSortField]=useState(\"datetime\");const[sortDirection,setSortDirection]=useState(\"desc\");const[isExportModalOpen,setIsExportModalOpen]=useState(false);const[exportFrom,setExportFrom]=useState(\"\");const[exportTo,setExportTo]=useState(\"\");const[exportLoading,setExportLoading]=useState(false);const{addToast}=useToast();const currentPage=Math.floor(offset/limit)+1;const searchQuery=useMemo(()=>(filters.search||\"\").trim().toLowerCase(),[filters.search]);const dateFromTs=useMemo(()=>filters.from?toTimestamp(filters.from):null,[filters.from]);const dateToTs=useMemo(()=>filters.to?toTimestamp(filters.to):null,[filters.to]);const{pagedLeads,filteredTotal,sortedLeads}=useMemo(()=>{const source=Array.isArray(leads)?leads:[];const filteredBySearch=searchQuery?source.filter(lead=>{const name=(lead.name||\"\").toLowerCase();const phone=(lead.phone||lead.phone_number||lead.client_phone||lead.contact_phone||lead.mobile||\"\").toString().toLowerCase();return name.includes(searchQuery)||phone.includes(searchQuery);}):source;const filteredByQuality=filters.quality&&filters.quality!==\"all\"?filteredBySearch.filter(lead=>lead.client_quality_bucket===filters.quality):filteredBySearch;const filteredByDate=filteredByQuality.filter(lead=>{const leadTs=toTimestamp(lead.datetime);if(dateFromTs&&leadTs<dateFromTs)return false;if(dateToTs&&leadTs>dateToTs)return false;return true;});const sorted=[...filteredByDate].sort((a,b)=>{const dir=sortDirection===\"asc\"?1:-1;let av=a[sortField];let bv=b[sortField];if(sortField===\"datetime\"){av=toTimestamp(av);bv=toTimestamp(bv);}if(av===bv)return 0;if(typeof av===\"string\"&&typeof bv===\"string\"){return av.localeCompare(bv)*dir;}return av>bv?dir:-dir;});const totalCount=sorted.length;const start=offset;const page=sorted.slice(start,start+limit);return{pagedLeads:page,filteredTotal:totalCount,sortedLeads:sorted};},[leads,searchQuery,filters.quality,dateFromTs,dateToTs,sortField,sortDirection,offset,limit]);const totalPages=Math.max(1,Math.ceil(filteredTotal/limit));const handleQualityChange=useCallback(e=>{onFilterChange(_objectSpread(_objectSpread({},filters),{},{quality:e.target.value}));},[filters,onFilterChange]);const handleSearchChange=useCallback(e=>{onFilterChange(_objectSpread(_objectSpread({},filters),{},{search:e.target.value}));},[filters,onFilterChange]);const handleFromChange=useCallback(e=>{const value=e.target.value?\"\".concat(e.target.value,\"T00:00:00\"):\"\";onFilterChange(_objectSpread(_objectSpread({},filters),{},{from:value}));},[filters,onFilterChange]);const handleToChange=useCallback(e=>{const value=e.target.value?\"\".concat(e.target.value,\"T23:59:59\"):\"\";onFilterChange(_objectSpread(_objectSpread({},filters),{},{to:value}));},[filters,onFilterChange]);const handleLimitChange=useCallback(e=>{const newLimit=Number(e.target.value)||10;onPageSizeChange(newLimit);},[onPageSizeChange]);const goToPage=useCallback(page=>{if(page<1||page>totalPages)return;const newOffset=(page-1)*limit;onPageChange(newOffset);},[limit,onPageChange,totalPages]);const changeSort=useCallback(field=>{setSortField(prevField=>{if(prevField===field){setSortDirection(prevDir=>prevDir===\"asc\"?\"desc\":\"asc\");return prevField;}setSortDirection(field===\"datetime\"?\"desc\":\"asc\");return field;});},[]);const buildCsvRows=sourceLeads=>(sourceLeads||[]).map(lead=>({id:lead.id,datetime:lead.datetime,name:lead.name,city:lead.city,selected_car:lead.selected_car,purchase_method:lead.purchase_method,client_quality:lead.client_quality,traffic_source:lead.traffic_source,messenger:lead.messenger,dealer_center:lead.dealer_center,dialog_link:lead.dialog_link,summary_dialog:lead.summary_dialog,source_system:lead.source_system,platform_user_id:lead.platform_user_id}));const triggerCsvDownload=useCallback((rows,fileName)=>{const header=Object.keys(rows[0]);const csvLines=[header.join(\",\"),...rows.map(row=>header.map(key=>{var _row$key;const value=(_row$key=row[key])!==null&&_row$key!==void 0?_row$key:\"\";const escaped=String(value).replace(/\"/g,'\"\"');return\"\\\"\".concat(escaped,\"\\\"\");}).join(\",\"))];const blob=new Blob([csvLines.join(\"\\n\")],{type:\"text/csv;charset=utf-8;\"});const url=URL.createObjectURL(blob);const link=document.createElement(\"a\");link.href=url;link.download=fileName;document.body.appendChild(link);link.click();document.body.removeChild(link);URL.revokeObjectURL(url);},[]);const openExportModal=useCallback(()=>{setExportFrom(filters.from?filters.from.slice(0,10):\"\");setExportTo(filters.to?filters.to.slice(0,10):\"\");setIsExportModalOpen(true);},[filters.from,filters.to]);const closeExportModal=useCallback(()=>{if(exportLoading)return;setIsExportModalOpen(false);},[exportLoading]);const exportToCsv=useCallback(async()=>{if(!exportFrom||!exportTo){window.alert(\"Выберите начальную и конечную даты для экспорта.\");return;}const from=\"\".concat(exportFrom,\"T00:00:00\");const to=\"\".concat(exportTo,\"T23:59:59\");const fromTs=toTimestamp(from);const toTs=toTimestamp(to);if(!fromTs||!toTs||fromTs>toTs){window.alert(\"Проверьте корректность диапазона дат.\");return;}setExportLoading(true);try{const exportFiltered=sortedLeads.filter(lead=>{const leadTs=toTimestamp(lead.datetime);return leadTs>=fromTs&&leadTs<=toTs;});const rows=buildCsvRows(exportFiltered);if(rows.length===0){window.alert(\"Нет данных за выбранный диапазон дат.\");return;}triggerCsvDownload(rows,\"leads-\".concat(exportFrom,\"-\").concat(exportTo,\".csv\"));addToast(\"CSV успешно скачан.\",\"success\");setIsExportModalOpen(false);}catch(error){// eslint-disable-next-line no-console\nconsole.error(\"Ошибка экспорта CSV\",error);addToast(\"Не удалось выгрузить CSV.\",\"error\");}finally{setExportLoading(false);}},[exportFrom,exportTo,sortedLeads,triggerCsvDownload,addToast]);const dateSortArrow=sortField===\"datetime\"?sortDirection===\"desc\"?\" ↓\":\" ↑\":\"\";const rowsLabel=useMemo(()=>pagedLeads.length,[pagedLeads]);const showEmptyState=!loading&&pagedLeads.length===0;return/*#__PURE__*/_jsxs(\"div\",{className:\"card p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-sm font-semibold text-slate-700 dark:text-slate-200\",children:\"\\u041B\\u0438\\u0434\\u044B\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-500 dark:text-slate-400\",children:\"\\u041F\\u043E\\u0438\\u0441\\u043A \\u043F\\u043E \\u0438\\u043C\\u0435\\u043D\\u0438 / \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0443, \\u0444\\u0438\\u043B\\u044C\\u0442\\u0440 \\u043F\\u043E \\u043A\\u0430\\u0447\\u0435\\u0441\\u0442\\u0432\\u0443 \\u0438 \\u0434\\u0430\\u0442\\u0430\\u043C.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2 items-end\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs text-slate-500 dark:text-slate-400 mb-1\",children:\"\\u041F\\u043E\\u0438\\u0441\\u043A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:filters.search||\"\",onChange:handleSearchChange,placeholder:\"\\u0418\\u043C\\u044F \\u0438\\u043B\\u0438 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D...\",className:\"w-40 rounded-md border border-slate-200 px-2 py-1 text-sm shadow-sm focus:border-primary-500 focus:outline-none focus:ring-1 focus:ring-primary-500 dark:bg-slate-900 dark:border-slate-700 dark:text-slate-100\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs text-slate-500 dark:text-slate-400 mb-1\",children:\"\\u041A\\u0430\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E\"}),/*#__PURE__*/_jsxs(\"select\",{value:filters.quality||\"all\",onChange:handleQualityChange,className:\"w-32 rounded-md border border-slate-200 px-2 py-1 text-sm shadow-sm focus:border-primary-500 focus:outline-none focus:ring-1 focus:ring-primary-500 dark:bg-slate-900 dark:border-slate-700 dark:text-slate-100\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"\\u0412\\u0441\\u0435\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0432\\u044B\\u0441\\u043E\\u043A\\u0438\\u0439\",children:\"\\u0412\\u044B\\u0441\\u043E\\u043A\\u0438\\u0439\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0445\\u043E\\u0440\\u043E\\u0448\\u0438\\u0439\",children:\"\\u0425\\u043E\\u0440\\u043E\\u0448\\u0438\\u0439\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0441\\u0440\\u0435\\u0434\\u043D\\u0438\\u0439\",children:\"\\u0421\\u0440\\u0435\\u0434\\u043D\\u0438\\u0439\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u043D\\u0438\\u0437\\u043A\\u0438\\u0439\",children:\"\\u041D\\u0438\\u0437\\u043A\\u0438\\u0439\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs text-slate-500 dark:text-slate-400 mb-1\",children:\"\\u0421 \\u0434\\u0430\\u0442\\u044B\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:filters.from?filters.from.slice(0,10):\"\",onChange:handleFromChange,className:\"w-36 rounded-md border border-slate-200 px-2 py-1 text-sm shadow-sm focus:border-primary-500 focus:outline-none focus:ring-1 focus:ring-primary-500 dark:bg-slate-900 dark:border-slate-700 dark:text-slate-100\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs text-slate-500 dark:text-slate-400 mb-1\",children:\"\\u041F\\u043E \\u0434\\u0430\\u0442\\u0443\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:filters.to?filters.to.slice(0,10):\"\",onChange:handleToChange,className:\"w-36 rounded-md border border-slate-200 px-2 py-1 text-sm shadow-sm focus:border-primary-500 focus:outline-none focus:ring-1 focus:ring-primary-500 dark:bg-slate-900 dark:border-slate-700 dark:text-slate-100\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs text-slate-500 dark:text-slate-400 mb-1\",children:\"\\u041D\\u0430 \\u0441\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0435\"}),/*#__PURE__*/_jsxs(\"select\",{value:limit,onChange:handleLimitChange,className:\"w-24 rounded-md border border-slate-200 px-2 py-1 text-sm shadow-sm focus:border-primary-500 focus:outline-none focus:ring-1 focus:ring-primary-500 dark:bg-slate-900 dark:border-slate-700 dark:text-slate-100\",children:[/*#__PURE__*/_jsx(\"option\",{value:10,children:\"10\"}),/*#__PURE__*/_jsx(\"option\",{value:25,children:\"25\"}),/*#__PURE__*/_jsx(\"option\",{value:50,children:\"50\"})]})]})]})]}),showEmptyState?/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center rounded-xl border border-dashed border-slate-200 bg-slate-50 px-6 py-10 text-center dark:border-slate-700 dark:bg-slate-900/40\",children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"h-12 w-12 text-slate-400\",viewBox:\"0 0 48 48\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M10 12h28M10 20h28M10 28h16\",stroke:\"currentColor\",strokeWidth:\"3\",strokeLinecap:\"round\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"36\",cy:\"32\",r:\"6\",stroke:\"currentColor\",strokeWidth:\"3\"})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-4 text-sm font-semibold text-slate-700 dark:text-slate-200\",children:\"\\u041D\\u0438\\u0447\\u0435\\u0433\\u043E \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-xs text-slate-500 dark:text-slate-400\",children:\"\\u041F\\u043E\\u043F\\u0440\\u043E\\u0431\\u0443\\u0439\\u0442\\u0435 \\u0438\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u0437\\u0430\\u043F\\u0440\\u043E\\u0441 \\u0438\\u043B\\u0438 \\u0441\\u043D\\u044F\\u0442\\u044C \\u0444\\u0438\\u043B\\u044C\\u0442\\u0440\\u044B.\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto overflow-y-visible\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"table-header sticky top-0 z-10\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left cursor-pointer\",onClick:()=>changeSort(\"name\"),title:\"\\u0421\\u043E\\u0440\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u043E \\u0438\\u043C\\u0435\\u043D\\u0438\",children:\"\\u0418\\u043C\\u044F\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left cursor-pointer\",onClick:()=>changeSort(\"selected_car\"),title:\"\\u0421\\u043E\\u0440\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u043E \\u043C\\u043E\\u0434\\u0435\\u043B\\u0438\",children:\"\\u041C\\u043E\\u0434\\u0435\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left cursor-pointer\",onClick:()=>changeSort(\"client_quality\"),title:\"\\u0421\\u043E\\u0440\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u043E \\u043A\\u0430\\u0447\\u0435\\u0441\\u0442\\u0432\\u0443\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative inline-flex items-center gap-1 group\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u041A\\u0430\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E\"}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex h-4 w-4 items-center justify-center rounded-full border border-slate-300 text-[10px] font-semibold text-slate-500 dark:border-slate-600 dark:text-slate-300\",children:\"i\"}),/*#__PURE__*/_jsx(\"div\",{className:\"pointer-events-none absolute left-1/2 top-full z-30 w-96 -translate-x-1/2 mt-2 invisible opacity-0 transition duration-150 group-hover:visible group-hover:opacity-100\",children:/*#__PURE__*/_jsx(\"div\",{className:\"rounded-lg bg-slate-900 px-4 py-3 text-xs text-slate-100 shadow-xl dark:bg-slate-950\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"mt-2 space-y-1 text-slate-200\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"\\u2022 0\\u201310 \\u0431\\u0430\\u043B\\u043B\\u043E\\u0432: \\u041A\\u043B\\u0438\\u0435\\u043D\\u0442 \\u043D\\u0435 \\u043E\\u0442\\u0432\\u0435\\u0442\\u0438\\u043B \\u043D\\u0438 \\u043D\\u0430 \\u043E\\u0434\\u0438\\u043D \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441 \\u0438\\u043B\\u0438 \\u0438\\u0433\\u043D\\u043E\\u0440\\u0438\\u0440\\u0443\\u0435\\u0442 \\u043C\\u0435\\u043D\\u0435\\u0434\\u0436\\u0435\\u0440\\u0430.\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u2022 11\\u201330 \\u0431\\u0430\\u043B\\u043B\\u043E\\u0432: \\u041E\\u0434\\u043D\\u043E\\u0441\\u043B\\u043E\\u0436\\u043D\\u044B\\u0435 \\u043E\\u0442\\u0432\\u0435\\u0442\\u044B \\u0431\\u0435\\u0437 \\u0438\\u043D\\u0438\\u0446\\u0438\\u0430\\u0442\\u0438\\u0432\\u044B (\\xAB\\u044F\\u0441\\u043D\\u043E\\xBB, \\xAB\\u043F\\u043E\\u0434\\u0443\\u043C\\u0430\\u044E\\xBB, \\xAB\\u043D\\u0435\\u0442\\xBB).\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u2022 31\\u201360 \\u0431\\u0430\\u043B\\u043B\\u043E\\u0432: \\u041A\\u043B\\u0438\\u0435\\u043D\\u0442 \\u0438\\u0434\\u0435\\u0442 \\u043D\\u0430 \\u043A\\u043E\\u043D\\u0442\\u0430\\u043A\\u0442 \\u0438 \\u043E\\u0442\\u0432\\u0435\\u0447\\u0430\\u0435\\u0442 \\u043D\\u0430 \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441\\u044B, \\u043D\\u043E \\u0441\\u0430\\u043C \\u043D\\u0438\\u0447\\u0435\\u0433\\u043E \\u043D\\u0435 \\u0441\\u043F\\u0440\\u0430\\u0448\\u0438\\u0432\\u0430\\u0435\\u0442.\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u2022 61\\u201390 \\u0431\\u0430\\u043B\\u043B\\u043E\\u0432: \\u042F\\u0432\\u043D\\u044B\\u0435 \\u0441\\u0438\\u0433\\u043D\\u0430\\u043B\\u044B \\u043A \\u043F\\u043E\\u043A\\u0443\\u043F\\u043A\\u0435 (\\u0432\\u0441\\u0442\\u0440\\u0435\\u0447\\u043D\\u044B\\u0435 \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441\\u044B \\u043E \\u0446\\u0435\\u043D\\u0435, \\u0441\\u0440\\u043E\\u043A\\u0430\\u0445, \\u0443\\u0441\\u043B\\u043E\\u0432\\u0438\\u044F\\u0445 \\u0438\\u043B\\u0438 \\u0433\\u0430\\u0440\\u0430\\u043D\\u0442\\u0438\\u044F\\u0445).\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u2022 91\\u2013100 \\u0431\\u0430\\u043B\\u043B\\u043E\\u0432: \\u041A\\u043B\\u0438\\u0435\\u043D\\u0442 \\u0441\\u043E\\u0433\\u043B\\u0430\\u0441\\u0438\\u043B\\u0441\\u044F \\u043D\\u0430 \\u0441\\u043E\\u0437\\u0432\\u043E\\u043D, \\u043E\\u0441\\u0442\\u0430\\u0432\\u0438\\u043B \\u043A\\u043E\\u043D\\u0442\\u0430\\u043A\\u0442\\u044B \\u0434\\u043B\\u044F \\u0441\\u0432\\u044F\\u0437\\u0438 \\u0438\\u043B\\u0438 \\u0437\\u0430\\u043F\\u0440\\u043E\\u0441\\u0438\\u043B \\u0441\\u0447\\u0435\\u0442.\"})]})})})]})}),/*#__PURE__*/_jsxs(\"th\",{className:\"px-3 py-2 text-left cursor-pointer\",onClick:()=>changeSort(\"datetime\"),title:\"\\u0421\\u043E\\u0440\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u043E \\u0434\\u0430\\u0442\\u0435\",children:[\"\\u0414\\u0430\\u0442\\u0430\",dateSortArrow]}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left\",children:\"\\u0413\\u043E\\u0440\\u043E\\u0434\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left\",children:\"\\u0418\\u0441\\u0442\\u043E\\u0447\\u043D\\u0438\\u043A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left\",children:\"\\u041A\\u0430\\u043D\\u0430\\u043B\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-right\",children:\"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:loading?Array.from({length:6}).map((_,idx)=>/*#__PURE__*/_jsx(\"tr\",{className:\"table-row\",children:/*#__PURE__*/_jsx(\"td\",{colSpan:8,className:\"px-3 py-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-3 w-full animate-pulse rounded bg-slate-200 dark:bg-slate-700\"})})},\"skeleton-\".concat(idx))):pagedLeads.map(lead=>{const qualityClass=QUALITY_LABEL_CLASS[lead.client_quality_bucket]||\"badge bg-slate-100 text-slate-700\";const qualityStripeClass=lead.client_quality_bucket===\"высокий\"?\"border-l-4 border-emerald-500\":lead.client_quality_bucket===\"хороший\"?\"border-l-4 border-sky-500\":lead.client_quality_bucket===\"средний\"?\"border-l-4 border-amber-500\":\"border-l-4 border-rose-500\";return/*#__PURE__*/_jsxs(\"tr\",{className:\"table-row \".concat(qualityStripeClass),children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 whitespace-nowrap text-sm text-slate-800 dark:text-slate-100\",children:lead.name}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300\",children:lead.selected_car}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"span\",{className:qualityClass,children:[lead.client_quality_bucket,\" (\",lead.client_quality,\")\"]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300\",children:formatDate(lead.datetime)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300\",children:lead.city}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300\",children:lead.traffic_source}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300\",children:lead.messenger}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 text-right\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>onViewLead(lead),className:\"inline-flex items-center rounded-md border border-slate-200 px-3 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50 dark:border-slate-700 dark:text-slate-100 dark:hover:bg-slate-800\",children:\"\\u041F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\"})})]},lead.id);})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-slate-500 dark:text-slate-400\",children:[\"\\u041F\\u043E\\u043A\\u0430\\u0437\\u0430\\u043D\\u043E \",rowsLabel,\" \\u0438\\u0437 \",filteredTotal,\" \\u043B\\u0438\\u0434\\u043E\\u0432.\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 justify-end\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>goToPage(currentPage-1),disabled:currentPage<=1,className:\"rounded-md border border-slate-200 px-2 py-1 text-xs text-slate-600 disabled:opacity-40 disabled:cursor-not-allowed hover:bg-slate-50 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800\",children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-slate-600 dark:text-slate-300\",children:[\"\\u0421\\u0442\\u0440. \",currentPage,\" / \",totalPages]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>goToPage(currentPage+1),disabled:currentPage>=totalPages,className:\"rounded-md border border-slate-200 px-2 py-1 text-xs text-slate-600 disabled:opacity-40 disabled:cursor-not-allowed hover:bg-slate-50 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800\",children:\"\\u0414\\u0430\\u043B\\u0435\\u0435\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:openExportModal,className:\"ml-2 rounded-md border border-slate-200 px-3 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50 dark:border-slate-700 dark:text-slate-100 dark:hover:bg-slate-800\",children:\"\\u042D\\u043A\\u0441\\u043F\\u043E\\u0440\\u0442 CSV\"})]})]}),isExportModalOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-md rounded-xl border border-slate-200 bg-white p-4 shadow-lg dark:border-slate-700 dark:bg-slate-800\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-semibold text-slate-800 dark:text-slate-100\",children:\"\\u042D\\u043A\\u0441\\u043F\\u043E\\u0440\\u0442 CSV \\u043F\\u043E \\u0434\\u0438\\u0430\\u043F\\u0430\\u0437\\u043E\\u043D\\u0443 \\u0434\\u0430\\u0442\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-xs text-slate-500 dark:text-slate-400\",children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043D\\u0430\\u0447\\u0430\\u043B\\u044C\\u043D\\u0443\\u044E \\u0438 \\u043A\\u043E\\u043D\\u0435\\u0447\\u043D\\u0443\\u044E \\u0434\\u0430\\u0442\\u044B. \\u0412 \\u044D\\u043A\\u0441\\u043F\\u043E\\u0440\\u0442 \\u043F\\u043E\\u043F\\u0430\\u0434\\u0443\\u0442 \\u0442\\u043E\\u043B\\u044C\\u043A\\u043E \\u043B\\u0438\\u0434\\u044B \\u0432 \\u044D\\u0442\\u043E\\u043C \\u0434\\u0438\\u0430\\u043F\\u0430\\u0437\\u043E\\u043D\\u0435.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 grid gap-3 sm:grid-cols-2\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"text-xs text-slate-600 dark:text-slate-300\",children:[\"Start Date\",/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:exportFrom,onChange:e=>setExportFrom(e.target.value),className:\"mt-1 w-full rounded-md border border-slate-200 px-2 py-1 text-sm focus:border-primary-500 focus:outline-none focus:ring-1 focus:ring-primary-500 dark:bg-slate-900 dark:border-slate-700 dark:text-slate-100\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"text-xs text-slate-600 dark:text-slate-300\",children:[\"End Date\",/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:exportTo,onChange:e=>setExportTo(e.target.value),className:\"mt-1 w-full rounded-md border border-slate-200 px-2 py-1 text-sm focus:border-primary-500 focus:outline-none focus:ring-1 focus:ring-primary-500 dark:bg-slate-900 dark:border-slate-700 dark:text-slate-100\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex justify-end gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:closeExportModal,disabled:exportLoading,className:\"rounded-md border border-slate-200 px-3 py-1 text-xs text-slate-700 hover:bg-slate-50 disabled:opacity-60 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-700\",children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:exportToCsv,disabled:exportLoading,className:\"rounded-md bg-primary-600 px-3 py-1 text-xs font-medium text-white hover:bg-primary-700 disabled:opacity-60\",children:exportLoading?\"Экспорт...\":\"Скачать CSV\"})]})]})})]});};export default LeadsTable;","map":{"version":3,"names":["React","useCallback","useMemo","useState","format","isValid","parse","parseISO","useToast","jsx","_jsx","jsxs","_jsxs","QUALITY_LABEL_CLASS","высокий","хороший","средний","низкий","formatDate","value","date","Date","isNaN","getTime","_unused","toTimestamp","raw","String","trim","isoDate","knownFormats","dateFormat","parsed","fallback","Number","LeadsTable","_ref","leads","limit","offset","onPageChange","onPageSizeChange","onFilterChange","filters","onViewLead","loading","sortField","setSortField","sortDirection","setSortDirection","isExportModalOpen","setIsExportModalOpen","exportFrom","setExportFrom","exportTo","setExportTo","exportLoading","setExportLoading","addToast","currentPage","Math","floor","searchQuery","search","toLowerCase","dateFromTs","from","dateToTs","to","pagedLeads","filteredTotal","sortedLeads","source","Array","isArray","filteredBySearch","filter","lead","name","phone","phone_number","client_phone","contact_phone","mobile","toString","includes","filteredByQuality","quality","client_quality_bucket","filteredByDate","leadTs","datetime","sorted","sort","a","b","dir","av","bv","localeCompare","totalCount","length","start","page","slice","totalPages","max","ceil","handleQualityChange","e","_objectSpread","target","handleSearchChange","handleFromChange","concat","handleToChange","handleLimitChange","newLimit","goToPage","newOffset","changeSort","field","prevField","prevDir","buildCsvRows","sourceLeads","map","id","city","selected_car","purchase_method","client_quality","traffic_source","messenger","dealer_center","dialog_link","summary_dialog","source_system","platform_user_id","triggerCsvDownload","rows","fileName","header","Object","keys","csvLines","join","row","key","_row$key","escaped","replace","blob","Blob","type","url","URL","createObjectURL","link","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","openExportModal","closeExportModal","exportToCsv","window","alert","fromTs","toTs","exportFiltered","error","console","dateSortArrow","rowsLabel","showEmptyState","className","children","onChange","placeholder","viewBox","fill","xmlns","d","stroke","strokeWidth","strokeLinecap","cx","cy","r","onClick","title","_","idx","colSpan","qualityClass","qualityStripeClass","disabled"],"sources":["/Users/ikassen/kiakia/frontend/src/components/LeadsTable.jsx"],"sourcesContent":["import React, { useCallback, useMemo, useState } from \"react\";\nimport { format, isValid, parse, parseISO } from \"date-fns\";\nimport { useToast } from \"../contexts/ToastContext\";\n\nconst QUALITY_LABEL_CLASS = {\n  высокий: \"badge badge-high\",\n  хороший: \"badge badge-good\",\n  средний: \"badge badge-medium\",\n  низкий: \"badge badge-low\"\n};\n\nfunction formatDate(value) {\n  if (!value) return \"—\";\n  try {\n    const date = new Date(value);\n    if (isNaN(date.getTime())) return value;\n    return format(date, \"dd.MM.yyyy HH:mm\");\n  } catch {\n    return value;\n  }\n}\n\nfunction toTimestamp(value) {\n  if (!value) return 0;\n  if (typeof value === \"number\") return value;\n  if (value instanceof Date) return value.getTime() || 0;\n\n  const raw = String(value).trim();\n  if (!raw) return 0;\n\n  const isoDate = parseISO(raw);\n  if (isValid(isoDate)) return isoDate.getTime();\n\n  const knownFormats = [\n    \"yyyy-MM-dd HH:mm:ss\",\n    \"yyyy-MM-dd'T'HH:mm:ss\",\n    \"yyyy-MM-dd\",\n    \"dd.MM.yyyy HH:mm\",\n    \"dd.MM.yyyy\"\n  ];\n\n  for (const dateFormat of knownFormats) {\n    const parsed = parse(raw, dateFormat, new Date());\n    if (isValid(parsed)) return parsed.getTime();\n  }\n\n  const fallback = new Date(raw);\n  return Number.isNaN(fallback.getTime()) ? 0 : fallback.getTime();\n}\n\nconst LeadsTable = ({\n  leads,\n  limit,\n  offset,\n  onPageChange,\n  onPageSizeChange,\n  onFilterChange,\n  filters,\n  onViewLead,\n  loading\n}) => {\n  const [sortField, setSortField] = useState(\"datetime\");\n  const [sortDirection, setSortDirection] = useState(\"desc\");\n  const [isExportModalOpen, setIsExportModalOpen] = useState(false);\n  const [exportFrom, setExportFrom] = useState(\"\");\n  const [exportTo, setExportTo] = useState(\"\");\n  const [exportLoading, setExportLoading] = useState(false);\n  const { addToast } = useToast();\n  const currentPage = Math.floor(offset / limit) + 1;\n\n  const searchQuery = useMemo(\n    () => (filters.search || \"\").trim().toLowerCase(),\n    [filters.search]\n  );\n\n  const dateFromTs = useMemo(\n    () => (filters.from ? toTimestamp(filters.from) : null),\n    [filters.from]\n  );\n\n  const dateToTs = useMemo(\n    () => (filters.to ? toTimestamp(filters.to) : null),\n    [filters.to]\n  );\n\n  const { pagedLeads, filteredTotal, sortedLeads } = useMemo(() => {\n    const source = Array.isArray(leads) ? leads : [];\n\n    const filteredBySearch = searchQuery\n      ? source.filter((lead) => {\n          const name = (lead.name || \"\").toLowerCase();\n          const phone = (\n            lead.phone ||\n            lead.phone_number ||\n            lead.client_phone ||\n            lead.contact_phone ||\n            lead.mobile ||\n            \"\"\n          ).toString().toLowerCase();\n          return name.includes(searchQuery) || phone.includes(searchQuery);\n        })\n      : source;\n\n    const filteredByQuality =\n      filters.quality && filters.quality !== \"all\"\n        ? filteredBySearch.filter(\n            (lead) => lead.client_quality_bucket === filters.quality\n          )\n        : filteredBySearch;\n\n    const filteredByDate = filteredByQuality.filter((lead) => {\n      const leadTs = toTimestamp(lead.datetime);\n      if (dateFromTs && leadTs < dateFromTs) return false;\n      if (dateToTs && leadTs > dateToTs) return false;\n      return true;\n    });\n\n    const sorted = [...filteredByDate].sort((a, b) => {\n      const dir = sortDirection === \"asc\" ? 1 : -1;\n      let av = a[sortField];\n      let bv = b[sortField];\n      if (sortField === \"datetime\") {\n        av = toTimestamp(av);\n        bv = toTimestamp(bv);\n      }\n      if (av === bv) return 0;\n      if (typeof av === \"string\" && typeof bv === \"string\") {\n        return av.localeCompare(bv) * dir;\n      }\n      return av > bv ? dir : -dir;\n    });\n\n    const totalCount = sorted.length;\n    const start = offset;\n    const page = sorted.slice(start, start + limit);\n\n    return { pagedLeads: page, filteredTotal: totalCount, sortedLeads: sorted };\n  }, [leads, searchQuery, filters.quality, dateFromTs, dateToTs, sortField, sortDirection, offset, limit]);\n\n  const totalPages = Math.max(1, Math.ceil(filteredTotal / limit));\n\n  const handleQualityChange = useCallback((e) => {\n    onFilterChange({ ...filters, quality: e.target.value });\n  }, [filters, onFilterChange]);\n\n  const handleSearchChange = useCallback((e) => {\n    onFilterChange({ ...filters, search: e.target.value });\n  }, [filters, onFilterChange]);\n\n  const handleFromChange = useCallback((e) => {\n    const value = e.target.value ? `${e.target.value}T00:00:00` : \"\";\n    onFilterChange({ ...filters, from: value });\n  }, [filters, onFilterChange]);\n\n  const handleToChange = useCallback((e) => {\n    const value = e.target.value ? `${e.target.value}T23:59:59` : \"\";\n    onFilterChange({ ...filters, to: value });\n  }, [filters, onFilterChange]);\n\n  const handleLimitChange = useCallback((e) => {\n    const newLimit = Number(e.target.value) || 10;\n    onPageSizeChange(newLimit);\n  }, [onPageSizeChange]);\n\n  const goToPage = useCallback((page) => {\n    if (page < 1 || page > totalPages) return;\n    const newOffset = (page - 1) * limit;\n    onPageChange(newOffset);\n  }, [limit, onPageChange, totalPages]);\n\n  const changeSort = useCallback((field) => {\n    setSortField((prevField) => {\n      if (prevField === field) {\n        setSortDirection((prevDir) => (prevDir === \"asc\" ? \"desc\" : \"asc\"));\n        return prevField;\n      }\n      setSortDirection(field === \"datetime\" ? \"desc\" : \"asc\");\n      return field;\n    });\n  }, []);\n\n  const buildCsvRows = (sourceLeads) =>\n    (sourceLeads || []).map((lead) => ({\n      id: lead.id,\n      datetime: lead.datetime,\n      name: lead.name,\n      city: lead.city,\n      selected_car: lead.selected_car,\n      purchase_method: lead.purchase_method,\n      client_quality: lead.client_quality,\n      traffic_source: lead.traffic_source,\n      messenger: lead.messenger,\n      dealer_center: lead.dealer_center,\n      dialog_link: lead.dialog_link,\n      summary_dialog: lead.summary_dialog,\n      source_system: lead.source_system,\n      platform_user_id: lead.platform_user_id\n    }));\n\n  const triggerCsvDownload = useCallback((rows, fileName) => {\n    const header = Object.keys(rows[0]);\n    const csvLines = [\n      header.join(\",\"),\n      ...rows.map((row) =>\n        header\n          .map((key) => {\n            const value = row[key] ?? \"\";\n            const escaped = String(value).replace(/\"/g, '\"\"');\n            return `\"${escaped}\"`;\n          })\n          .join(\",\")\n      )\n    ];\n\n    const blob = new Blob([csvLines.join(\"\\n\")], {\n      type: \"text/csv;charset=utf-8;\"\n    });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement(\"a\");\n    link.href = url;\n    link.download = fileName;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    URL.revokeObjectURL(url);\n  }, []);\n\n  const openExportModal = useCallback(() => {\n    setExportFrom(filters.from ? filters.from.slice(0, 10) : \"\");\n    setExportTo(filters.to ? filters.to.slice(0, 10) : \"\");\n    setIsExportModalOpen(true);\n  }, [filters.from, filters.to]);\n\n  const closeExportModal = useCallback(() => {\n    if (exportLoading) return;\n    setIsExportModalOpen(false);\n  }, [exportLoading]);\n\n  const exportToCsv = useCallback(async () => {\n    if (!exportFrom || !exportTo) {\n      window.alert(\"Выберите начальную и конечную даты для экспорта.\");\n      return;\n    }\n\n    const from = `${exportFrom}T00:00:00`;\n    const to = `${exportTo}T23:59:59`;\n    const fromTs = toTimestamp(from);\n    const toTs = toTimestamp(to);\n\n    if (!fromTs || !toTs || fromTs > toTs) {\n      window.alert(\"Проверьте корректность диапазона дат.\");\n      return;\n    }\n\n    setExportLoading(true);\n    try {\n      const exportFiltered = sortedLeads.filter((lead) => {\n        const leadTs = toTimestamp(lead.datetime);\n        return leadTs >= fromTs && leadTs <= toTs;\n      });\n\n      const rows = buildCsvRows(exportFiltered);\n      if (rows.length === 0) {\n        window.alert(\"Нет данных за выбранный диапазон дат.\");\n        return;\n      }\n\n      triggerCsvDownload(rows, `leads-${exportFrom}-${exportTo}.csv`);\n      addToast(\"CSV успешно скачан.\", \"success\");\n      setIsExportModalOpen(false);\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.error(\"Ошибка экспорта CSV\", error);\n      addToast(\"Не удалось выгрузить CSV.\", \"error\");\n    } finally {\n      setExportLoading(false);\n    }\n  }, [exportFrom, exportTo, sortedLeads, triggerCsvDownload, addToast]);\n\n  const dateSortArrow =\n    sortField === \"datetime\" ? (sortDirection === \"desc\" ? \" ↓\" : \" ↑\") : \"\";\n\n  const rowsLabel = useMemo(() => pagedLeads.length, [pagedLeads]);\n\n  const showEmptyState = !loading && pagedLeads.length === 0;\n\n  return (\n    <div className=\"card p-4\">\n      <div className=\"flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between mb-4\">\n        <div className=\"space-y-2\">\n          <h2 className=\"text-sm font-semibold text-slate-700 dark:text-slate-200\">\n            Лиды\n          </h2>\n          <p className=\"text-xs text-slate-500 dark:text-slate-400\">\n            Поиск по имени / телефону, фильтр по качеству и датам.\n          </p>\n        </div>\n        <div className=\"flex flex-wrap gap-2 items-end\">\n          <div className=\"flex flex-col\">\n            <label className=\"text-xs text-slate-500 dark:text-slate-400 mb-1\">Поиск</label>\n            <input\n              type=\"text\"\n              value={filters.search || \"\"}\n              onChange={handleSearchChange}\n              placeholder=\"Имя или телефон...\"\n              className=\"w-40 rounded-md border border-slate-200 px-2 py-1 text-sm shadow-sm focus:border-primary-500 focus:outline-none focus:ring-1 focus:ring-primary-500 dark:bg-slate-900 dark:border-slate-700 dark:text-slate-100\"\n            />\n          </div>\n          <div className=\"flex flex-col\">\n            <label className=\"text-xs text-slate-500 dark:text-slate-400 mb-1\">Качество</label>\n            <select\n              value={filters.quality || \"all\"}\n              onChange={handleQualityChange}\n              className=\"w-32 rounded-md border border-slate-200 px-2 py-1 text-sm shadow-sm focus:border-primary-500 focus:outline-none focus:ring-1 focus:ring-primary-500 dark:bg-slate-900 dark:border-slate-700 dark:text-slate-100\"\n            >\n              <option value=\"all\">Все</option>\n              <option value=\"высокий\">Высокий</option>\n              <option value=\"хороший\">Хороший</option>\n              <option value=\"средний\">Средний</option>\n              <option value=\"низкий\">Низкий</option>\n            </select>\n          </div>\n          <div className=\"flex flex-col\">\n            <label className=\"text-xs text-slate-500 dark:text-slate-400 mb-1\">С даты</label>\n            <input\n              type=\"date\"\n              value={filters.from ? filters.from.slice(0, 10) : \"\"}\n              onChange={handleFromChange}\n              className=\"w-36 rounded-md border border-slate-200 px-2 py-1 text-sm shadow-sm focus:border-primary-500 focus:outline-none focus:ring-1 focus:ring-primary-500 dark:bg-slate-900 dark:border-slate-700 dark:text-slate-100\"\n            />\n          </div>\n          <div className=\"flex flex-col\">\n            <label className=\"text-xs text-slate-500 dark:text-slate-400 mb-1\">По дату</label>\n            <input\n              type=\"date\"\n              value={filters.to ? filters.to.slice(0, 10) : \"\"}\n              onChange={handleToChange}\n              className=\"w-36 rounded-md border border-slate-200 px-2 py-1 text-sm shadow-sm focus:border-primary-500 focus:outline-none focus:ring-1 focus:ring-primary-500 dark:bg-slate-900 dark:border-slate-700 dark:text-slate-100\"\n            />\n          </div>\n          <div className=\"flex flex-col\">\n            <label className=\"text-xs text-slate-500 dark:text-slate-400 mb-1\">На странице</label>\n            <select\n              value={limit}\n              onChange={handleLimitChange}\n              className=\"w-24 rounded-md border border-slate-200 px-2 py-1 text-sm shadow-sm focus:border-primary-500 focus:outline-none focus:ring-1 focus:ring-primary-500 dark:bg-slate-900 dark:border-slate-700 dark:text-slate-100\"\n            >\n              <option value={10}>10</option>\n              <option value={25}>25</option>\n              <option value={50}>50</option>\n            </select>\n          </div>\n        </div>\n      </div>\n\n      {showEmptyState ? (\n        <div className=\"flex flex-col items-center justify-center rounded-xl border border-dashed border-slate-200 bg-slate-50 px-6 py-10 text-center dark:border-slate-700 dark:bg-slate-900/40\">\n          <svg\n            className=\"h-12 w-12 text-slate-400\"\n            viewBox=\"0 0 48 48\"\n            fill=\"none\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              d=\"M10 12h28M10 20h28M10 28h16\"\n              stroke=\"currentColor\"\n              strokeWidth=\"3\"\n              strokeLinecap=\"round\"\n            />\n            <circle cx=\"36\" cy=\"32\" r=\"6\" stroke=\"currentColor\" strokeWidth=\"3\" />\n          </svg>\n          <h3 className=\"mt-4 text-sm font-semibold text-slate-700 dark:text-slate-200\">\n            Ничего не найдено\n          </h3>\n          <p className=\"mt-1 text-xs text-slate-500 dark:text-slate-400\">\n            Попробуйте изменить запрос или снять фильтры.\n          </p>\n        </div>\n      ) : (\n        <div className=\"overflow-x-auto overflow-y-visible\">\n          <table className=\"min-w-full text-sm\">\n            <thead className=\"table-header sticky top-0 z-10\">\n              <tr>\n                <th\n                  className=\"px-3 py-2 text-left cursor-pointer\"\n                  onClick={() => changeSort(\"name\")}\n                  title=\"Сортировать по имени\"\n                >\n                  Имя\n                </th>\n                <th\n                  className=\"px-3 py-2 text-left cursor-pointer\"\n                  onClick={() => changeSort(\"selected_car\")}\n                  title=\"Сортировать по модели\"\n                >\n                  Модель\n                </th>\n                <th\n                  className=\"px-3 py-2 text-left cursor-pointer\"\n                  onClick={() => changeSort(\"client_quality\")}\n                  title=\"Сортировать по качеству\"\n                >\n                  <div className=\"relative inline-flex items-center gap-1 group\">\n                    <span>Качество</span>\n                    <span className=\"inline-flex h-4 w-4 items-center justify-center rounded-full border border-slate-300 text-[10px] font-semibold text-slate-500 dark:border-slate-600 dark:text-slate-300\">\n                      i\n                    </span>\n                    <div className=\"pointer-events-none absolute left-1/2 top-full z-30 w-96 -translate-x-1/2 mt-2 invisible opacity-0 transition duration-150 group-hover:visible group-hover:opacity-100\">\n                      <div className=\"rounded-lg bg-slate-900 px-4 py-3 text-xs text-slate-100 shadow-xl dark:bg-slate-950\">\n                        <ul className=\"mt-2 space-y-1 text-slate-200\">\n                          <li>• 0–10 баллов: Клиент не ответил ни на один вопрос или игнорирует менеджера.</li>\n                          <li>• 11–30 баллов: Односложные ответы без инициативы («ясно», «подумаю», «нет»).</li>\n                          <li>• 31–60 баллов: Клиент идет на контакт и отвечает на вопросы, но сам ничего не спрашивает.</li>\n                          <li>• 61–90 баллов: Явные сигналы к покупке (встречные вопросы о цене, сроках, условиях или гарантиях).</li>\n                          <li>• 91–100 баллов: Клиент согласился на созвон, оставил контакты для связи или запросил счет.</li>\n                        </ul>\n                      </div>\n                    </div>\n                  </div>\n                </th>\n                <th\n                  className=\"px-3 py-2 text-left cursor-pointer\"\n                  onClick={() => changeSort(\"datetime\")}\n                  title=\"Сортировать по дате\"\n                >\n                  Дата{dateSortArrow}\n                </th>\n                <th className=\"px-3 py-2 text-left\">Город</th>\n                <th className=\"px-3 py-2 text-left\">Источник</th>\n                <th className=\"px-3 py-2 text-left\">Канал</th>\n                <th className=\"px-3 py-2 text-right\">Действия</th>\n              </tr>\n            </thead>\n            <tbody>\n              {loading ? (\n                Array.from({ length: 6 }).map((_, idx) => (\n                  <tr key={`skeleton-${idx}`} className=\"table-row\">\n                    <td colSpan={8} className=\"px-3 py-3\">\n                      <div className=\"h-3 w-full animate-pulse rounded bg-slate-200 dark:bg-slate-700\" />\n                    </td>\n                  </tr>\n                ))\n              ) : (\n                pagedLeads.map((lead) => {\n                  const qualityClass =\n                    QUALITY_LABEL_CLASS[lead.client_quality_bucket] ||\n                    \"badge bg-slate-100 text-slate-700\";\n                  const qualityStripeClass =\n                    lead.client_quality_bucket === \"высокий\"\n                      ? \"border-l-4 border-emerald-500\"\n                      : lead.client_quality_bucket === \"хороший\"\n                      ? \"border-l-4 border-sky-500\"\n                      : lead.client_quality_bucket === \"средний\"\n                      ? \"border-l-4 border-amber-500\"\n                      : \"border-l-4 border-rose-500\";\n                  return (\n                    <tr key={lead.id} className={`table-row ${qualityStripeClass}`}>\n                      <td className=\"px-3 py-2 whitespace-nowrap text-sm text-slate-800 dark:text-slate-100\">\n                        {lead.name}\n                      </td>\n                      <td className=\"px-3 py-2 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300\">\n                        {lead.selected_car}\n                      </td>\n                      <td className=\"px-3 py-2 whitespace-nowrap\">\n                        <span className={qualityClass}>\n                          {lead.client_quality_bucket} ({lead.client_quality})\n                        </span>\n                      </td>\n                      <td className=\"px-3 py-2 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300\">\n                        {formatDate(lead.datetime)}\n                      </td>\n                      <td className=\"px-3 py-2 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300\">\n                        {lead.city}\n                      </td>\n                      <td className=\"px-3 py-2 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300\">\n                        {lead.traffic_source}\n                      </td>\n                      <td className=\"px-3 py-2 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300\">\n                        {lead.messenger}\n                      </td>\n                      <td className=\"px-3 py-2 text-right\">\n                        <button\n                          onClick={() => onViewLead(lead)}\n                          className=\"inline-flex items-center rounded-md border border-slate-200 px-3 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50 dark:border-slate-700 dark:text-slate-100 dark:hover:bg-slate-800\"\n                        >\n                          Просмотр\n                        </button>\n                      </td>\n                    </tr>\n                  );\n                })\n              )}\n            </tbody>\n          </table>\n        </div>\n      )}\n\n      <div className=\"mt-4 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between\">\n        <p className=\"text-xs text-slate-500 dark:text-slate-400\">\n          Показано {rowsLabel} из {filteredTotal} лидов.\n        </p>\n        <div className=\"flex items-center gap-2 justify-end\">\n          <button\n            onClick={() => goToPage(currentPage - 1)}\n            disabled={currentPage <= 1}\n            className=\"rounded-md border border-slate-200 px-2 py-1 text-xs text-slate-600 disabled:opacity-40 disabled:cursor-not-allowed hover:bg-slate-50 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800\"\n          >\n            Назад\n          </button>\n          <span className=\"text-xs text-slate-600 dark:text-slate-300\">\n            Стр. {currentPage} / {totalPages}\n          </span>\n          <button\n            onClick={() => goToPage(currentPage + 1)}\n            disabled={currentPage >= totalPages}\n            className=\"rounded-md border border-slate-200 px-2 py-1 text-xs text-slate-600 disabled:opacity-40 disabled:cursor-not-allowed hover:bg-slate-50 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800\"\n          >\n            Далее\n          </button>\n          <button\n            type=\"button\"\n            onClick={openExportModal}\n            className=\"ml-2 rounded-md border border-slate-200 px-3 py-1 text-xs font-medium text-slate-700 hover:bg-slate-50 dark:border-slate-700 dark:text-slate-100 dark:hover:bg-slate-800\"\n          >\n            Экспорт CSV\n          </button>\n        </div>\n      </div>\n\n      {isExportModalOpen && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/50 p-4\">\n          <div className=\"w-full max-w-md rounded-xl border border-slate-200 bg-white p-4 shadow-lg dark:border-slate-700 dark:bg-slate-800\">\n            <h3 className=\"text-sm font-semibold text-slate-800 dark:text-slate-100\">\n              Экспорт CSV по диапазону дат\n            </h3>\n            <p className=\"mt-1 text-xs text-slate-500 dark:text-slate-400\">\n              Выберите начальную и конечную даты. В экспорт попадут только лиды в этом диапазоне.\n            </p>\n\n            <div className=\"mt-3 grid gap-3 sm:grid-cols-2\">\n              <label className=\"text-xs text-slate-600 dark:text-slate-300\">\n                Start Date\n                <input\n                  type=\"date\"\n                  value={exportFrom}\n                  onChange={(e) => setExportFrom(e.target.value)}\n                  className=\"mt-1 w-full rounded-md border border-slate-200 px-2 py-1 text-sm focus:border-primary-500 focus:outline-none focus:ring-1 focus:ring-primary-500 dark:bg-slate-900 dark:border-slate-700 dark:text-slate-100\"\n                />\n              </label>\n              <label className=\"text-xs text-slate-600 dark:text-slate-300\">\n                End Date\n                <input\n                  type=\"date\"\n                  value={exportTo}\n                  onChange={(e) => setExportTo(e.target.value)}\n                  className=\"mt-1 w-full rounded-md border border-slate-200 px-2 py-1 text-sm focus:border-primary-500 focus:outline-none focus:ring-1 focus:ring-primary-500 dark:bg-slate-900 dark:border-slate-700 dark:text-slate-100\"\n                />\n              </label>\n            </div>\n\n            <div className=\"mt-4 flex justify-end gap-2\">\n              <button\n                type=\"button\"\n                onClick={closeExportModal}\n                disabled={exportLoading}\n                className=\"rounded-md border border-slate-200 px-3 py-1 text-xs text-slate-700 hover:bg-slate-50 disabled:opacity-60 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-700\"\n              >\n                Отмена\n              </button>\n              <button\n                type=\"button\"\n                onClick={exportToCsv}\n                disabled={exportLoading}\n                className=\"rounded-md bg-primary-600 px-3 py-1 text-xs font-medium text-white hover:bg-primary-700 disabled:opacity-60\"\n              >\n                {exportLoading ? \"Экспорт...\" : \"Скачать CSV\"}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default LeadsTable;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}