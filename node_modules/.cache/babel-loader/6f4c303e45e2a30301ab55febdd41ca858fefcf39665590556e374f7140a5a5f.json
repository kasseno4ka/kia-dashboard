{"ast":null,"code":"var _jsxFileName = \"/Users/ikassen/kiakia/frontend/src/components/Charts.jsx\";\nimport React from \"react\";\nimport { ResponsiveContainer, PieChart, Pie, Cell, Tooltip } from \"recharts\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CHART_COLORS = [\"#2563eb\", \"#10b981\", \"#ff6b57\", \"#f59e0b\", \"#7c3aed\"];\nconst OTHERS_COLOR = \"#d1d5db\";\nconst QUALITY_ORDER = [\"высокий\", \"хороший\", \"средний\", \"низкий\"];\nconst QUALITY_LABELS = {\n  высокий: \"Высокий\",\n  хороший: \"Хороший\",\n  средний: \"Средний\",\n  низкий: \"Низкий\"\n};\nconst QUALITY_COLORS = {\n  Высокий: \"#22c55e\",\n  Хороший: \"#84cc16\",\n  Средний: \"#facc15\",\n  Низкий: \"#ef4444\"\n};\nconst STATIC_METRICS = [{\n  label: \"Общая конверсия\",\n  value: \"55%\"\n}, {\n  label: \"Высокий потенциал\",\n  value: \"49%\"\n}, {\n  label: \"Максимум заявок за день\",\n  value: \"161\"\n}, {\n  label: \"Лучший день\",\n  value: \"2026-02-24\"\n}];\nfunction normalizeQuality(byQuality) {\n  const normalized = (byQuality || []).map(item => {\n    var _ref, _item$count;\n    return {\n      quality: item.quality,\n      name: QUALITY_LABELS[item.quality] || item.quality || \"Неизвестно\",\n      value: (_ref = (_item$count = item.count) !== null && _item$count !== void 0 ? _item$count : item.value) !== null && _ref !== void 0 ? _ref : 0\n    };\n  });\n  return normalized.filter(item => item.value > 0).sort((a, b) => QUALITY_ORDER.indexOf(a.quality) - QUALITY_ORDER.indexOf(b.quality));\n}\nfunction toTopFiveWithOthers(items, nameKey, valueKey) {\n  const normalized = (items || []).map(item => {\n    var _ref2, _ref3, _item$valueKey;\n    return {\n      name: item[nameKey] || item.name || \"—\",\n      value: (_ref2 = (_ref3 = (_item$valueKey = item[valueKey]) !== null && _item$valueKey !== void 0 ? _item$valueKey : item.count) !== null && _ref3 !== void 0 ? _ref3 : item.value) !== null && _ref2 !== void 0 ? _ref2 : 0\n    };\n  }).filter(item => item.value > 0).sort((a, b) => b.value - a.value);\n  const topFive = normalized.slice(0, 5);\n  const othersValue = normalized.slice(5).reduce((sum, item) => sum + item.value, 0);\n  if (othersValue > 0) {\n    topFive.push({\n      name: \"Остальные\",\n      value: othersValue,\n      isOthers: true\n    });\n  }\n  return topFive;\n}\nconst TooltipContent = ({\n  active,\n  payload\n}) => {\n  var _payload$;\n  if (!active || !payload || !payload.length) return null;\n  const item = (_payload$ = payload[0]) === null || _payload$ === void 0 ? void 0 : _payload$.payload;\n  if (!item) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"rounded-md border border-slate-200 bg-white px-2 py-1 text-xs text-slate-700 shadow-sm dark:border-slate-700 dark:bg-slate-800 dark:text-slate-200\",\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"font-medium\",\n      children: item.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: item.value\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n};\n_c = TooltipContent;\nconst renderCalloutLabel = ({\n  cx,\n  cy,\n  midAngle,\n  outerRadius,\n  percent,\n  name\n}) => {\n  if (!percent || percent <= 0) return null;\n  const RADIAN = Math.PI / 180;\n  const labelRadius = outerRadius + 26;\n  const x = cx + labelRadius * Math.cos(-midAngle * RADIAN);\n  const y = cy + labelRadius * Math.sin(-midAngle * RADIAN);\n  const textAnchor = x > cx ? \"start\" : \"end\";\n  return /*#__PURE__*/_jsxDEV(\"text\", {\n    x: x,\n    y: y,\n    fill: \"var(--chart-label-color)\",\n    textAnchor: textAnchor,\n    dominantBaseline: \"central\",\n    style: {\n      fontSize: 11,\n      fontWeight: 500\n    },\n    children: `${name} ${Math.round(percent * 100)}%`\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this);\n};\nconst EmptyState = ({\n  loading\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"flex h-full items-center justify-center text-sm text-slate-400\",\n  children: loading ? \"Загрузка данных...\" : \"Недостаточно данных\"\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 98,\n  columnNumber: 3\n}, this);\n_c2 = EmptyState;\nconst DonutChart = ({\n  data,\n  loading,\n  qualityMode = false,\n  compact = false\n}) => {\n  if (loading || data.length === 0) {\n    return /*#__PURE__*/_jsxDEV(EmptyState, {\n      loading: loading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 12\n    }, this);\n  }\n  const chartMargin = compact ? {\n    top: 28,\n    right: 82,\n    bottom: 28,\n    left: 82\n  } : {\n    top: 28,\n    right: 96,\n    bottom: 28,\n    left: 96\n  };\n  const innerRadius = compact ? 58 : 66;\n  const outerRadius = compact ? 96 : 108;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-full w-full overflow-visible p-4 [--chart-label-color:#475569] [--chart-line-color:#94a3b8] dark:[--chart-label-color:#cbd5e1] dark:[--chart-line-color:#cbd5e1]\",\n    children: /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n      width: \"100%\",\n      height: \"100%\",\n      children: /*#__PURE__*/_jsxDEV(PieChart, {\n        margin: chartMargin,\n        children: [/*#__PURE__*/_jsxDEV(Pie, {\n          data: data,\n          dataKey: \"value\",\n          nameKey: \"name\",\n          cx: \"50%\",\n          cy: \"50%\",\n          innerRadius: innerRadius,\n          outerRadius: outerRadius,\n          paddingAngle: 2,\n          label: renderCalloutLabel,\n          labelLine: {\n            stroke: \"var(--chart-line-color)\",\n            strokeWidth: 1\n          },\n          children: data.map((entry, index) => {\n            const fill = qualityMode ? QUALITY_COLORS[entry.name] || OTHERS_COLOR : entry.isOthers ? OTHERS_COLOR : CHART_COLORS[index % CHART_COLORS.length];\n            return /*#__PURE__*/_jsxDEV(Cell, {\n              fill: fill\n            }, `${entry.name}-${index}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 22\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n          content: /*#__PURE__*/_jsxDEV(TooltipContent, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 5\n  }, this);\n};\n_c3 = DonutChart;\nconst ChartCard = ({\n  title,\n  data,\n  loading,\n  qualityMode = false,\n  compact = false,\n  className = \"\",\n  heightClass = \"h-71\"\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: `rounded-2xl border border-transparent bg-white p-6 shadow-md dark:border-slate-700 dark:bg-slate-800 ${className}`,\n  children: /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `flex items-center gap-4 ${heightClass}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex h-full w-[15%] items-center\",\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-xl font-bold text-slate-900 dark:text-slate-100\",\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-full w-[85%]\",\n      children: /*#__PURE__*/_jsxDEV(DonutChart, {\n        data: data,\n        loading: loading,\n        qualityMode: qualityMode,\n        compact: compact\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 158,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 157,\n  columnNumber: 3\n}, this);\n_c4 = ChartCard;\nconst KeyMetricsCard = () => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"rounded-2xl border border-transparent bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800\",\n  children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n    className: \"mb-4 text-base font-semibold text-slate-700 dark:text-slate-200\",\n    children: \"\\u041A\\u043B\\u044E\\u0447\\u0435\\u0432\\u044B\\u0435 \\u043C\\u0435\\u0442\\u0440\\u0438\\u043A\\u0438\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 176,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-wrap items-center justify-between gap-4 lg:flex-nowrap\",\n    children: STATIC_METRICS.map(metric => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-w-[180px] flex-1\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-slate-500 dark:text-slate-400\",\n        children: metric.label\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-1 text-2xl font-bold text-slate-900 dark:text-slate-100\",\n        children: metric.value\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 11\n      }, this)]\n    }, metric.label, true, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 177,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 175,\n  columnNumber: 3\n}, this);\n_c5 = KeyMetricsCard;\nconst Charts = ({\n  aggregations,\n  loading\n}) => {\n  if (!aggregations && !loading) return null;\n  const byModel = toTopFiveWithOthers((aggregations === null || aggregations === void 0 ? void 0 : aggregations.by_model) || [], \"model\", \"count\");\n  const byCity = toTopFiveWithOthers((aggregations === null || aggregations === void 0 ? void 0 : aggregations.by_city) || [], \"name\", \"value\");\n  const byQuality = normalizeQuality((aggregations === null || aggregations === void 0 ? void 0 : aggregations.by_quality) || []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mb-6 grid grid-cols-1 gap-6 font-sans lg:grid-cols-2\",\n    children: [/*#__PURE__*/_jsxDEV(ChartCard, {\n      title: \"\\u041C\\u043E\\u0434\\u0435\\u043B\\u0438 \\u0430\\u0432\\u0442\\u043E\\u043C\\u043E\\u0431\\u0438\\u043B\\u0435\\u0439\",\n      data: byModel,\n      loading: loading,\n      compact: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ChartCard, {\n      title: \"\\u0421\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043A\\u0430 \\u043F\\u043E \\u0433\\u043E\\u0440\\u043E\\u0434\\u0430\\u043C\",\n      data: byCity,\n      loading: loading,\n      compact: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ChartCard, {\n      className: \"lg:col-span-2\",\n      title: \"\\u041A\\u0430\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u043B\\u0438\\u0434\\u043E\\u0432\",\n      data: byQuality,\n      loading: loading,\n      qualityMode: true,\n      heightClass: \"h-[408px]\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"lg:col-span-2\",\n      children: /*#__PURE__*/_jsxDEV(KeyMetricsCard, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 196,\n    columnNumber: 5\n  }, this);\n};\n_c6 = Charts;\nexport default Charts;\nvar _c, _c2, _c3, _c4, _c5, _c6;\n$RefreshReg$(_c, \"TooltipContent\");\n$RefreshReg$(_c2, \"EmptyState\");\n$RefreshReg$(_c3, \"DonutChart\");\n$RefreshReg$(_c4, \"ChartCard\");\n$RefreshReg$(_c5, \"KeyMetricsCard\");\n$RefreshReg$(_c6, \"Charts\");","map":{"version":3,"names":["React","ResponsiveContainer","PieChart","Pie","Cell","Tooltip","jsxDEV","_jsxDEV","CHART_COLORS","OTHERS_COLOR","QUALITY_ORDER","QUALITY_LABELS","высокий","хороший","средний","низкий","QUALITY_COLORS","Высокий","Хороший","Средний","Низкий","STATIC_METRICS","label","value","normalizeQuality","byQuality","normalized","map","item","_ref","_item$count","quality","name","count","filter","sort","a","b","indexOf","toTopFiveWithOthers","items","nameKey","valueKey","_ref2","_ref3","_item$valueKey","topFive","slice","othersValue","reduce","sum","push","isOthers","TooltipContent","active","payload","_payload$","length","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","renderCalloutLabel","cx","cy","midAngle","outerRadius","percent","RADIAN","Math","PI","labelRadius","x","cos","y","sin","textAnchor","fill","dominantBaseline","style","fontSize","fontWeight","round","EmptyState","loading","_c2","DonutChart","data","qualityMode","compact","chartMargin","top","right","bottom","left","innerRadius","width","height","margin","dataKey","paddingAngle","labelLine","stroke","strokeWidth","entry","index","content","_c3","ChartCard","title","heightClass","_c4","KeyMetricsCard","metric","_c5","Charts","aggregations","byModel","by_model","byCity","by_city","by_quality","_c6","$RefreshReg$"],"sources":["/Users/ikassen/kiakia/frontend/src/components/Charts.jsx"],"sourcesContent":["import React from \"react\";\nimport { ResponsiveContainer, PieChart, Pie, Cell, Tooltip } from \"recharts\";\n\nconst CHART_COLORS = [\"#2563eb\", \"#10b981\", \"#ff6b57\", \"#f59e0b\", \"#7c3aed\"];\nconst OTHERS_COLOR = \"#d1d5db\";\n\nconst QUALITY_ORDER = [\"высокий\", \"хороший\", \"средний\", \"низкий\"];\nconst QUALITY_LABELS = {\n  высокий: \"Высокий\",\n  хороший: \"Хороший\",\n  средний: \"Средний\",\n  низкий: \"Низкий\",\n};\n\nconst QUALITY_COLORS = {\n  Высокий: \"#22c55e\",\n  Хороший: \"#84cc16\",\n  Средний: \"#facc15\",\n  Низкий: \"#ef4444\",\n};\n\nconst STATIC_METRICS = [\n  { label: \"Общая конверсия\", value: \"55%\" },\n  { label: \"Высокий потенциал\", value: \"49%\" },\n  { label: \"Максимум заявок за день\", value: \"161\" },\n  { label: \"Лучший день\", value: \"2026-02-24\" },\n];\n\nfunction normalizeQuality(byQuality) {\n  const normalized = (byQuality || []).map((item) => ({\n    quality: item.quality,\n    name: QUALITY_LABELS[item.quality] || item.quality || \"Неизвестно\",\n    value: item.count ?? item.value ?? 0,\n  }));\n\n  return normalized\n    .filter((item) => item.value > 0)\n    .sort((a, b) => QUALITY_ORDER.indexOf(a.quality) - QUALITY_ORDER.indexOf(b.quality));\n}\n\nfunction toTopFiveWithOthers(items, nameKey, valueKey) {\n  const normalized = (items || [])\n    .map((item) => ({\n      name: item[nameKey] || item.name || \"—\",\n      value: item[valueKey] ?? item.count ?? item.value ?? 0,\n    }))\n    .filter((item) => item.value > 0)\n    .sort((a, b) => b.value - a.value);\n\n  const topFive = normalized.slice(0, 5);\n  const othersValue = normalized.slice(5).reduce((sum, item) => sum + item.value, 0);\n\n  if (othersValue > 0) {\n    topFive.push({ name: \"Остальные\", value: othersValue, isOthers: true });\n  }\n\n  return topFive;\n}\n\nconst TooltipContent = ({ active, payload }) => {\n  if (!active || !payload || !payload.length) return null;\n\n  const item = payload[0]?.payload;\n  if (!item) return null;\n\n  return (\n    <div className=\"rounded-md border border-slate-200 bg-white px-2 py-1 text-xs text-slate-700 shadow-sm dark:border-slate-700 dark:bg-slate-800 dark:text-slate-200\">\n      <p className=\"font-medium\">{item.name}</p>\n      <p>{item.value}</p>\n    </div>\n  );\n};\n\nconst renderCalloutLabel = ({ cx, cy, midAngle, outerRadius, percent, name }) => {\n  if (!percent || percent <= 0) return null;\n\n  const RADIAN = Math.PI / 180;\n  const labelRadius = outerRadius + 26;\n  const x = cx + labelRadius * Math.cos(-midAngle * RADIAN);\n  const y = cy + labelRadius * Math.sin(-midAngle * RADIAN);\n  const textAnchor = x > cx ? \"start\" : \"end\";\n\n  return (\n    <text\n      x={x}\n      y={y}\n      fill=\"var(--chart-label-color)\"\n      textAnchor={textAnchor}\n      dominantBaseline=\"central\"\n      style={{ fontSize: 11, fontWeight: 500 }}\n    >\n      {`${name} ${Math.round(percent * 100)}%`}\n    </text>\n  );\n};\n\nconst EmptyState = ({ loading }) => (\n  <div className=\"flex h-full items-center justify-center text-sm text-slate-400\">\n    {loading ? \"Загрузка данных...\" : \"Недостаточно данных\"}\n  </div>\n);\n\nconst DonutChart = ({ data, loading, qualityMode = false, compact = false }) => {\n  if (loading || data.length === 0) {\n    return <EmptyState loading={loading} />;\n  }\n\n  const chartMargin = compact\n    ? { top: 28, right: 82, bottom: 28, left: 82 }\n    : { top: 28, right: 96, bottom: 28, left: 96 };\n\n  const innerRadius = compact ? 58 : 66;\n  const outerRadius = compact ? 96 : 108;\n\n  return (\n    <div className=\"h-full w-full overflow-visible p-4 [--chart-label-color:#475569] [--chart-line-color:#94a3b8] dark:[--chart-label-color:#cbd5e1] dark:[--chart-line-color:#cbd5e1]\">\n      <ResponsiveContainer width=\"100%\" height=\"100%\">\n        <PieChart margin={chartMargin}>\n          <Pie\n            data={data}\n            dataKey=\"value\"\n            nameKey=\"name\"\n            cx=\"50%\"\n            cy=\"50%\"\n            innerRadius={innerRadius}\n            outerRadius={outerRadius}\n            paddingAngle={2}\n            label={renderCalloutLabel}\n            labelLine={{ stroke: \"var(--chart-line-color)\", strokeWidth: 1 }}\n          >\n            {data.map((entry, index) => {\n              const fill = qualityMode\n                ? QUALITY_COLORS[entry.name] || OTHERS_COLOR\n                : entry.isOthers\n                ? OTHERS_COLOR\n                : CHART_COLORS[index % CHART_COLORS.length];\n\n              return <Cell key={`${entry.name}-${index}`} fill={fill} />;\n            })}\n          </Pie>\n          <Tooltip content={<TooltipContent />} />\n        </PieChart>\n      </ResponsiveContainer>\n    </div>\n  );\n};\n\nconst ChartCard = ({\n  title,\n  data,\n  loading,\n  qualityMode = false,\n  compact = false,\n  className = \"\",\n  heightClass = \"h-71\",\n}) => (\n  <div className={`rounded-2xl border border-transparent bg-white p-6 shadow-md dark:border-slate-700 dark:bg-slate-800 ${className}`}>\n    <div className={`flex items-center gap-4 ${heightClass}`}>\n      <div className=\"flex h-full w-[15%] items-center\">\n        <h2 className=\"text-xl font-bold text-slate-900 dark:text-slate-100\">{title}</h2>\n      </div>\n      <div className=\"h-full w-[85%]\">\n        <DonutChart\n          data={data}\n          loading={loading}\n          qualityMode={qualityMode}\n          compact={compact}\n        />\n      </div>\n    </div>\n  </div>\n);\n\nconst KeyMetricsCard = () => (\n  <div className=\"rounded-2xl border border-transparent bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800\">\n    <h2 className=\"mb-4 text-base font-semibold text-slate-700 dark:text-slate-200\">Ключевые метрики</h2>\n    <div className=\"flex flex-wrap items-center justify-between gap-4 lg:flex-nowrap\">\n      {STATIC_METRICS.map((metric) => (\n        <div key={metric.label} className=\"min-w-[180px] flex-1\">\n          <p className=\"text-sm text-slate-500 dark:text-slate-400\">{metric.label}</p>\n          <p className=\"mt-1 text-2xl font-bold text-slate-900 dark:text-slate-100\">{metric.value}</p>\n        </div>\n      ))}\n    </div>\n  </div>\n);\n\nconst Charts = ({ aggregations, loading }) => {\n  if (!aggregations && !loading) return null;\n\n  const byModel = toTopFiveWithOthers(aggregations?.by_model || [], \"model\", \"count\");\n  const byCity = toTopFiveWithOthers(aggregations?.by_city || [], \"name\", \"value\");\n  const byQuality = normalizeQuality(aggregations?.by_quality || []);\n\n  return (\n    <div className=\"mb-6 grid grid-cols-1 gap-6 font-sans lg:grid-cols-2\">\n      <ChartCard\n        title=\"Модели автомобилей\"\n        data={byModel}\n        loading={loading}\n        compact\n      />\n\n      <ChartCard\n        title=\"Статистика по городам\"\n        data={byCity}\n        loading={loading}\n        compact\n      />\n\n      <ChartCard\n        className=\"lg:col-span-2\"\n        title=\"Качество лидов\"\n        data={byQuality}\n        loading={loading}\n        qualityMode\n        heightClass=\"h-[408px]\"\n      />\n\n      <div className=\"lg:col-span-2\">\n        <KeyMetricsCard />\n      </div>\n    </div>\n  );\n};\n\nexport default Charts;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}